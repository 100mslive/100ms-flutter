## HMSSDK Sample App

Clone the example app from [here](https://github.com/100mslive/100ms-flutter/tree/main).`example` folder contains code relevant to the example app.

> ğŸ”‘ Note: This uses provider as the state management library

## Features in sample app

Sample application contains all the features provided by `HMSSDK`. Just to name a few:

* ğŸ™ Join a room
* ğŸ Join with preview
* ğŸ‘‹ Leave room
* ğŸ™Š Mute/Unmute local audio
* ğŸ™ˆ Mute/Unmute local video
* ğŸ–– Mute Audio/Video for other roles and peers
* ğŸ Display video tracks
* ğŸ” Change role
* ğŸ“¨ Chat messaging
* ğŸ“² Screen share
* ğŸ¶ Audio share
* ğŸ”Š Audio output routing
* ğŸ™‹â€â™‚ï¸ Hand Raise
* ğŸƒâ€â™€ï¸ BRB(Be Right Back sign)

## Sample app architecture

Sample app uses provider as it's state management library.We have created separate `changeNotifier` classes namely:

* PreviewStore for Preview
* MeetingStore for Meeting room
* PeerTrackNode for individual peers

### PreviewStore

Preview Store acts as a data store for preview page.It implements `HMSPreviewListener` and `HMSLogListener` to get their callbacks by overriding their methods.

```dart
class PreviewStore extends ChangeNotifier
    implements HMSPreviewListener, HMSLogListener {}
```

### MeetingStore

Meeting Store acts as a data store for meeting page.It implements `HMSUpdateListener`,`HMSActionResultListener` and `HMSStatsListener` to get their callbacks by overriding their methods.

```dart
class MeetingStore extends ChangeNotifier
    with WidgetsBindingObserver
    implements HMSUpdateListener, HMSActionResultListener, HMSStatsListener {}
```

### PeerTrackNode

PeerTrackNode acts as a data store for each peer.One peerTrackNode object contains info about one peer.We are using this 
so that the update related to a peer are not transmitted to other peers.It contains info about peer,track,their on screen status etc.

```dart
class PeerTrackNode extends ChangeNotifier {
  HMSPeer peer;
  String uid;
  HMSVideoTrack? track;
  HMSAudioTrack? audioTrack;
  bool isOffscreen;
  int? networkQuality;
  RTCStats? stats;
}
```

## Deep Dive into features

Let's dive deeper into each feature and their implementation.

1. Join a room

`HMSSDK` provides join room method to join the room.`join` method requires `HMSConfig` as a parameter used while joining the room.
Before calling join method it's recommended to attach the `HMSUpdateListener` So that once join is successful we can get the callbacks.`HMSUpdateLister` can be attached as follows:

```dart
HMSSDK.addUpdateListener(listener: listener);
```

Now we are good to go for the join method.Let's look at the  `HMSConfig` class first:

```dart
class HMSConfig {

  ///[userName] you want in the room you join.
  final String userName;

  ///[authToken] generated by 100ms servers.
  final String authToken;

  ///[metaData] any additional information you'd like to specify for the peer.
  final String? metaData;

  ///[endPoint] where you have to make post request to get token.
  final String? endPoint;

  final bool shouldSkipPIIEvents;

  ///[captureNetworkQualityInPreview] to capture the network quality in preview
  final bool captureNetworkQualityInPreview;
}
```

We need to pass `HMSConfig` object to the join method while joining the room.

```dart
HMSSDK.join(config: config)
```

After calling the join method we need to attach `HMSUpdateListener`